import{_ as F,u as N,r as p,w as D,c as r,o as n,a as e,f as $,t as u,F as C,g as w,h as _,d as M,v as q,i as E,j as S,k as O,l as P,m as T,n as A,p as U,q as I,s as L,x as R}from"./main-CcoT8GgO.js";const H={class:"card"},Q=["src","alt"],Y={class:"row head"},G={class:"name"},J={class:"price"},K={class:"desc"},W={class:"row foot"},X={key:0,class:"badges"},Z={class:"badge"},ee={key:0,class:"overlay"},te={class:"modal"},se={class:"title"},le={key:0,class:"section"},ae=["value"],oe={key:1,class:"section"},ie=["value"],ne={class:"section row"},re={class:"qty"},ce={class:"section"},de={class:"actions"},ue={__name:"MenuItemCard",props:{item:{type:Object,required:!0}},setup(i){const g=i,h=N(),c=p(!1),f=p(1),m=p(null),d=p([]),k=p("");D(c,v=>{v&&(f.value=1,d.value=[],k.value="",m.value=g.item.sizes&&g.item.sizes.length>0?g.item.sizes[0]:null)});function y(){const v=d.value.reduce((a,b)=>a+Number(b.price),0),t=m.value?Number(m.value.price):g.item.price;h.add({id:g.item.id,name:g.item.name,image:g.item.image,price:t+v,variant:m.value,addOns:d.value,qty:f.value,notes:k.value}),c.value=!1}return(v,t)=>(n(),r("article",H,[e("img",{src:i.item.image,alt:i.item.name,class:"photo"},null,8,Q),e("div",Y,[e("h3",G,u(i.item.name),1),e("div",J,"$"+u(Number(i.item.price).toFixed(2)),1)]),e("p",K,u(i.item.desc),1),e("div",W,[i.item.badge?(n(),r("div",X,[e("span",Z,u(i.item.badge),1)])):$("",!0),e("button",{class:"add",onClick:t[0]||(t[0]=a=>c.value=!0)},"ADD")]),c.value?(n(),r("div",ee,[e("div",te,[e("h2",se,u(i.item.name),1),i.item.sizes&&i.item.sizes.length>0?(n(),r("section",le,[t[7]||(t[7]=e("h3",null,"Choose Size",-1)),(n(!0),r(C,null,w(i.item.sizes,a=>(n(),r("label",{key:a.sizeID,class:"option"},[_(e("input",{type:"radio",name:"variant",value:a,"onUpdate:modelValue":t[1]||(t[1]=b=>m.value=b)},null,8,ae),[[q,m.value]]),M(" "+u(a.sizeName)+" ($"+u(Number(a.price).toFixed(2))+") ",1)]))),128))])):$("",!0),i.item.addons&&i.item.addons.length>0?(n(),r("section",oe,[t[8]||(t[8]=e("h3",null,"Add-ons",-1)),(n(!0),r(C,null,w(i.item.addons,a=>(n(),r("label",{key:a.addonID,class:"option"},[_(e("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[2]||(t[2]=b=>d.value=b)},null,8,ie),[[E,d.value]]),M(" "+u(a.addonName)+" (+$"+u(Number(a.price).toFixed(2))+") ",1)]))),128))])):$("",!0),e("section",ne,[t[9]||(t[9]=e("h3",null,"Quantity",-1)),e("div",re,[e("button",{onClick:t[3]||(t[3]=a=>f.value>1&&f.value--)},"-"),e("span",null,u(f.value),1),e("button",{onClick:t[4]||(t[4]=a=>f.value++)},"+")])]),e("section",ce,[t[10]||(t[10]=e("h3",null,"Special Instructions",-1)),_(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>k.value=a),placeholder:"Any special requests or dietary requirements...",class:"notes-input",rows:"3"},null,512),[[S,k.value]])]),e("div",de,[e("button",{class:"cancel",onClick:t[6]||(t[6]=a=>c.value=!1)},"Cancel"),e("button",{class:"confirm",onClick:y},"Add to Cart")])])])):$("",!0)]))}},ve=F(ue,[["__scopeId","data-v-16b61957"]]),me={class:"sheet"},pe={class:"section"},ge={class:"grid2"},he=["checked","onChange"],fe={class:"section"},be={class:"rangebox"},ke={class:"range-label"},ye={__name:"FilterSheet",props:{open:Boolean,categories:{type:Array,default:()=>[]},prices:{type:Array,default:()=>[]}},emits:["close","apply-filters"],setup(i,{emit:g}){const h=p(20),c=p([]),f=i,m=g,d=v=>{const t=c.value.indexOf(v);t>-1?c.value.splice(t,1):c.value=[v]},k=()=>{const v={categories:c.value.map(t=>{const a=f.categories.find(b=>b.id===t);return{id:a.id,label:a.label}}),price:h.value};m("apply-filters",v)},y=()=>{c.value=[],h.value=20,m("apply-filters",{categories:[],price:null})};return(v,t)=>i.open?(n(),r("div",{key:0,class:"overlay",onClick:t[1]||(t[1]=O(a=>v.$emit("close"),["self"]))},[e("div",me,[t[4]||(t[4]=e("h2",{class:"title"},"Filter Menu",-1)),e("section",pe,[t[2]||(t[2]=e("h3",null,"Category",-1)),e("div",ge,[(n(!0),r(C,null,w(i.categories,a=>(n(),r("label",{key:a.id,class:"opt"},[e("input",{type:"checkbox",checked:c.value.includes(a.id),onChange:b=>d(a.id)},null,40,he),e("span",null,u(a.label),1)]))),128))])]),e("section",fe,[t[3]||(t[3]=e("h3",null,"Price Range",-1)),e("div",be,[_(e("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a)},null,512),[[S,h.value]]),e("div",ke," Selected: $0 – $"+u(h.value),1)])]),e("div",{class:"actions"},[e("button",{class:"ghost",onClick:y},"RESET"),e("button",{class:"primary",onClick:k},"APPLY FILTERS")])])])):$("",!0)}},$e=F(ye,[["__scopeId","data-v-c6f3342b"]]),Ce={class:"wrap"},we={class:"topbar"},_e={key:0,class:"badge"},xe={class:"cats",role:"tablist","aria-label":"Categories"},Fe=["aria-selected","onClick"],Me={class:"pill-emoji"},Ae=["src","alt"],Ie={key:1},Ne={class:"pill-label"},Se={class:"filters-row"},je={class:"list"},Ve={__name:"Menu",setup(i){const g=N(),h=P(),c=p(!1),f=[{id:"p1",label:"$0 – $10"},{id:"p2",label:"$10 – $20"},{id:"p3",label:"$20 – $30"},{id:"p4",label:"$30 – $40"},{id:"p5",label:"$40 – $60"},{id:"p6",label:"$60+"}],m=p([{id:"all",name:"All",emoji:"🍲"}]),d=p("all"),k=async()=>{try{const l=await h.fetchPackages();if(l.success&&l.data&&l.data.length>0){const s=l.data.map(o=>({id:o.packageID.toString(),name:o.packageName,image:o.photo80?`https://menu.deegaan.so/assets/images/meals/packages/small80/${o.photo80}`:"/images/dishes/default.jpg"}));m.value=[{id:"all",name:"All",emoji:"🍲",image:null},...s]}}catch(l){console.error("Error fetching categories:",l)}};T(async()=>{await k(),await a(),x()});const y=p([]),v=p([]),t=p(null),a=async()=>{try{const l=await h.fetchItems();l.success&&l.data&&(v.value=l.data.map(s=>({id:s.itemID.toString(),name:s.itemName,price:parseFloat(s.costPrice),desc:s.description||"",cat:s.packageID.toString(),image:s.photo320?`https://menu.deegaan.so/assets/images/meals/items/middle320/${s.photo320}`:"/images/dishes/default.jpg",badge:s.isVegetarian?"Vegetarian":s.isSpicy?"Spicy":"",sizes:s.active_sizes||[],addons:s.active_addons||[]})))}catch(l){console.error("Error fetching menu items:",l)}},b=l=>{d.value=l,x()},x=()=>{let l=[...v.value];d.value!=="all"&&(l=l.filter(s=>s.cat===d.value)),t.value!==null&&(l=l.filter(s=>s.price<=t.value)),y.value=l},j=A(()=>y.value),V=A(()=>m.value.filter(l=>l.id!=="all").map(l=>({id:l.id,label:l.name}))),z=l=>{if(t.value=l.price||null,l.categories&&l.categories.length>0){const s=l.categories[0];d.value=s.id}else d.value="all";x(),c.value=!1};function B(l){}return(l,s)=>(n(),r(C,null,[e("div",Ce,[e("header",we,[e("button",{class:"iconbtn",onClick:s[0]||(s[0]=o=>l.$router.back()),"aria-label":"Back"},[...s[4]||(s[4]=[e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),s[6]||(s[6]=e("h1",{class:"title"},"MENU",-1)),e("button",{class:"iconbtn cartbtn","aria-label":"Cart",onClick:s[1]||(s[1]=o=>l.$router.push({name:"checkout"}))},[s[5]||(s[5]=e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"9",cy:"20",r:"1"}),e("circle",{cx:"17",cy:"20",r:"1"}),e("path",{d:"M3 3h2l2.2 11.4a2 2 0 0 0 2 1.6h7.5a2 2 0 0 0 2-1.6L21 7H6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),I(g).count?(n(),r("span",_e,u(I(g).count),1)):$("",!0)])]),e("nav",xe,[(n(!0),r(C,null,w(m.value,o=>(n(),r("button",{key:o.id,class:L(["pill",{active:o.id===d.value}]),role:"tab","aria-selected":o.id===d.value,onClick:ze=>b(o.id)},[e("span",Me,[o.image?(n(),r("img",{key:0,src:o.image,alt:o.name,class:"pill-image"},null,8,Ae)):(n(),r("span",Ie,u(o.emoji),1))]),e("span",Ne,u(o.name),1)],10,Fe))),128))]),e("div",Se,[e("button",{class:"filterbtn",onClick:s[2]||(s[2]=o=>c.value=!0)},[...s[7]||(s[7]=[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M7 12h10M10 18h4","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"Filters",-1)])])]),e("main",je,[(n(!0),r(C,null,w(j.value,o=>(n(),R(ve,{key:o.id,item:o,onAdd:B},null,8,["item"]))),128))])]),U($e,{open:c.value,categories:V.value,prices:f,onClose:s[3]||(s[3]=o=>c.value=!1),onApplyFilters:z},null,8,["open","categories"])],64))}},De=F(Ve,[["__scopeId","data-v-dd586f53"]]);export{De as default};
