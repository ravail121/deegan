import{_ as F,r as g,w as z,c as r,o as n,a as e,f as k,t as m,F as $,g as C,h as x,d as M,v as B,i as E,j as O,k as P,u as q,l as T,m as A,n as L,p as I,q as R,s as U}from"./main-Cu1P8PnX.js";import{u as N}from"./cart-DuB090MG.js";const H={class:"card"},Q=["src","alt"],Y={class:"row head"},G={class:"name"},J={class:"price"},K={class:"desc"},W={class:"row foot"},X={key:0,class:"badges"},Z={class:"badge"},ee={key:0,class:"overlay"},te={class:"modal"},se={class:"title"},le={key:0,class:"section"},ae=["value"],oe={key:1,class:"section"},ie=["value"],ne={class:"section row"},re={class:"qty"},ce={class:"actions"},de={__name:"MenuItemCard",props:{item:{type:Object,required:!0}},setup(i){const p=i,h=N(),d=g(!1),f=g(1),v=g(null),u=g([]);z(d,b=>{b&&(f.value=1,u.value=[],v.value=p.item.sizes&&p.item.sizes.length>0?p.item.sizes[0]:null)});function y(){const b=u.value.reduce((l,c)=>l+Number(c.price),0),a=v.value?Number(v.value.price):p.item.price;h.add({id:p.item.id,name:p.item.name,image:p.item.image,price:a+b,variant:v.value,addOns:u.value,qty:f.value}),d.value=!1}return(b,a)=>(n(),r("article",H,[e("img",{src:i.item.image,alt:i.item.name,class:"photo"},null,8,Q),e("div",Y,[e("h3",G,m(i.item.name),1),e("div",J,"$"+m(Number(i.item.price).toFixed(2)),1)]),e("p",K,m(i.item.desc),1),e("div",W,[i.item.badge?(n(),r("div",X,[e("span",Z,m(i.item.badge),1)])):k("",!0),e("button",{class:"add",onClick:a[0]||(a[0]=l=>d.value=!0)},"ADD")]),d.value?(n(),r("div",ee,[e("div",te,[e("h2",se,m(i.item.name),1),i.item.sizes&&i.item.sizes.length>0?(n(),r("section",le,[a[6]||(a[6]=e("h3",null,"Choose Size",-1)),(n(!0),r($,null,C(i.item.sizes,l=>(n(),r("label",{key:l.sizeID,class:"option"},[x(e("input",{type:"radio",name:"variant",value:l,"onUpdate:modelValue":a[1]||(a[1]=c=>v.value=c)},null,8,ae),[[B,v.value]]),M(" "+m(l.sizeName)+" ($"+m(Number(l.price).toFixed(2))+") ",1)]))),128))])):k("",!0),i.item.addons&&i.item.addons.length>0?(n(),r("section",oe,[a[7]||(a[7]=e("h3",null,"Add-ons",-1)),(n(!0),r($,null,C(i.item.addons,l=>(n(),r("label",{key:l.addonID,class:"option"},[x(e("input",{type:"checkbox",value:l,"onUpdate:modelValue":a[2]||(a[2]=c=>u.value=c)},null,8,ie),[[E,u.value]]),M(" "+m(l.addonName)+" (+$"+m(Number(l.price).toFixed(2))+") ",1)]))),128))])):k("",!0),e("section",ne,[a[8]||(a[8]=e("h3",null,"Quantity",-1)),e("div",re,[e("button",{onClick:a[3]||(a[3]=l=>f.value>1&&f.value--)},"-"),e("span",null,m(f.value),1),e("button",{onClick:a[4]||(a[4]=l=>f.value++)},"+")])]),e("div",ce,[e("button",{class:"cancel",onClick:a[5]||(a[5]=l=>d.value=!1)},"Cancel"),e("button",{class:"confirm",onClick:y},"Add to Cart")])])])):k("",!0)]))}},ue=F(de,[["__scopeId","data-v-49ebfdd4"]]),me={class:"sheet"},ve={class:"section"},pe={class:"grid2"},ge=["checked","onChange"],he={class:"section"},fe={class:"rangebox"},be={class:"range-label"},ke={__name:"FilterSheet",props:{open:Boolean,categories:{type:Array,default:()=>[]},prices:{type:Array,default:()=>[]}},emits:["close","apply-filters"],setup(i,{emit:p}){const h=g(20),d=g([]),f=i,v=p,u=a=>{const l=d.value.indexOf(a);l>-1?d.value.splice(l,1):d.value=[a]},y=()=>{const a={categories:d.value.map(l=>{const c=f.categories.find(_=>_.id===l);return{id:c.id,label:c.label}}),price:h.value};v("apply-filters",a)},b=()=>{d.value=[],h.value=20,v("apply-filters",{categories:[],price:null})};return(a,l)=>i.open?(n(),r("div",{key:0,class:"overlay",onClick:l[1]||(l[1]=P(c=>a.$emit("close"),["self"]))},[e("div",me,[l[4]||(l[4]=e("h2",{class:"title"},"Filter Menu",-1)),e("section",ve,[l[2]||(l[2]=e("h3",null,"Category",-1)),e("div",pe,[(n(!0),r($,null,C(i.categories,c=>(n(),r("label",{key:c.id,class:"opt"},[e("input",{type:"checkbox",checked:d.value.includes(c.id),onChange:_=>u(c.id)},null,40,ge),e("span",null,m(c.label),1)]))),128))])]),e("section",he,[l[3]||(l[3]=e("h3",null,"Price Range",-1)),e("div",fe,[x(e("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":l[0]||(l[0]=c=>h.value=c)},null,512),[[O,h.value]]),e("div",be," Selected: $0 – $"+m(h.value),1)])]),e("div",{class:"actions"},[e("button",{class:"ghost",onClick:b},"RESET"),e("button",{class:"primary",onClick:y},"APPLY FILTERS")])])])):k("",!0)}},$e=F(ke,[["__scopeId","data-v-f5e76bb5"]]),ye={class:"wrap"},Ce={class:"topbar"},_e={key:0,class:"badge"},we={class:"cats",role:"tablist","aria-label":"Categories"},xe=["aria-selected","onClick"],Fe={class:"pill-emoji"},Me=["src","alt"],Ae={key:1},Ie={class:"pill-label"},Ne={class:"filters-row"},Se={class:"list"},je={__name:"Menu",setup(i){const p=N(),h=q(),d=g(!1),f=[{id:"p1",label:"$0 – $10"},{id:"p2",label:"$10 – $20"},{id:"p3",label:"$20 – $30"},{id:"p4",label:"$30 – $40"},{id:"p5",label:"$40 – $60"},{id:"p6",label:"$60+"}],v=g([{id:"all",name:"All",emoji:"🍲"}]),u=g("all"),y=async()=>{try{const t=await h.fetchPackages();if(console.log("Categories response:",t),t.success&&t.data&&t.data.length>0){const s=t.data.map(o=>({id:o.packageID.toString(),name:o.packageName,image:o.photo80?`https://menu.deegaan.so/assets/images/meals/packages/small80/${o.photo80}`:"/images/dishes/default.jpg"}));v.value=[{id:"all",name:"All",emoji:"🍲",image:null},...s]}}catch(t){console.error("Error fetching categories:",t)}};T(async()=>{await y(),await c(),w()});const b=g([]),a=g([]),l=g(null),c=async()=>{try{const t=await h.fetchItems();console.log("All items response:",t),t.success&&t.data&&(a.value=t.data.map(s=>({id:s.itemID.toString(),name:s.itemName,price:parseFloat(s.costPrice),desc:s.description||"",cat:s.packageID.toString(),image:s.photo320?`https://menu.deegaan.so/assets/images/meals/items/middle320/${s.photo320}`:"/images/dishes/default.jpg",badge:s.isVegetarian?"Vegetarian":s.isSpicy?"Spicy":"",sizes:s.active_sizes||[],addons:s.active_addons||[]})))}catch(t){console.error("Error fetching menu items:",t)}},_=t=>{u.value=t,w()},w=()=>{let t=[...a.value];u.value!=="all"&&(t=t.filter(s=>s.cat===u.value)),l.value!==null&&(t=t.filter(s=>s.price<=l.value)),b.value=t},S=A(()=>b.value),j=A(()=>v.value.filter(t=>t.id!=="all").map(t=>({id:t.id,label:t.name}))),D=t=>{if(console.log("Applying filters:",t),l.value=t.price||null,t.categories&&t.categories.length>0){const s=t.categories[0];u.value=s.id}else u.value="all";w(),d.value=!1};function V(t){console.log("ADD",t.id)}return(t,s)=>(n(),r($,null,[e("div",ye,[e("header",Ce,[e("button",{class:"iconbtn",onClick:s[0]||(s[0]=o=>t.$router.back()),"aria-label":"Back"},[...s[4]||(s[4]=[e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),s[6]||(s[6]=e("h1",{class:"title"},"MENU",-1)),e("button",{class:"iconbtn cartbtn","aria-label":"Cart",onClick:s[1]||(s[1]=o=>t.$router.push({name:"checkout"}))},[s[5]||(s[5]=e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"9",cy:"20",r:"1"}),e("circle",{cx:"17",cy:"20",r:"1"}),e("path",{d:"M3 3h2l2.2 11.4a2 2 0 0 0 2 1.6h7.5a2 2 0 0 0 2-1.6L21 7H6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),I(p).count?(n(),r("span",_e,m(I(p).count),1)):k("",!0)])]),e("nav",we,[(n(!0),r($,null,C(v.value,o=>(n(),r("button",{key:o.id,class:R(["pill",{active:o.id===u.value}]),role:"tab","aria-selected":o.id===u.value,onClick:De=>_(o.id)},[e("span",Fe,[o.image?(n(),r("img",{key:0,src:o.image,alt:o.name,class:"pill-image"},null,8,Me)):(n(),r("span",Ae,m(o.emoji),1))]),e("span",Ie,m(o.name),1)],10,xe))),128))]),e("div",Ne,[e("button",{class:"filterbtn",onClick:s[2]||(s[2]=o=>d.value=!0)},[...s[7]||(s[7]=[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M7 12h10M10 18h4","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"Filters",-1)])])]),e("main",Se,[(n(!0),r($,null,C(S.value,o=>(n(),U(ue,{key:o.id,item:o,onAdd:V},null,8,["item"]))),128))])]),L($e,{open:d.value,categories:j.value,prices:f,onClose:s[3]||(s[3]=o=>d.value=!1),onApplyFilters:D},null,8,["open","categories"])],64))}},Be=F(je,[["__scopeId","data-v-8cfcb905"]]);export{Be as default};
