import{_ as F,r as g,w as B,c as r,o as n,a as e,f as k,t as m,F as $,g as C,h as x,d as M,v as D,i as E,j as O,k as P,u as q,l as T,m as A,n as L,p as I,q as R,s as U}from"./main-D-w5nH6z.js";import{u as N}from"./cart-f4b2NoTH.js";const H={class:"card"},Q=["src","alt"],Y={class:"row head"},G={class:"name"},J={class:"price"},K={class:"desc"},W={class:"row foot"},X={key:0,class:"badges"},Z={class:"badge"},ee={key:0,class:"overlay"},te={class:"modal"},se={class:"title"},ae={key:0,class:"section"},le=["value"],ie={key:1,class:"section"},oe=["value"],ne={class:"section row"},re={class:"qty"},ce={class:"actions"},de={__name:"MenuItemCard",props:{item:{type:Object,required:!0}},setup(o){const p=o,h=N(),d=g(!1),f=g(1),v=g(null),u=g([]);B(d,b=>{b&&(f.value=1,u.value=[],v.value=p.item.sizes&&p.item.sizes.length>0?p.item.sizes[0]:null)});function y(){const b=u.value.reduce((s,c)=>s+Number(c.price),0),l=v.value?Number(v.value.price):p.item.price;h.add({id:p.item.id,name:p.item.name,image:p.item.image,price:l+b,variant:v.value,addOns:u.value,qty:f.value}),d.value=!1}return(b,l)=>(n(),r("article",H,[e("img",{src:o.item.image,alt:o.item.name,class:"photo"},null,8,Q),e("div",Y,[e("h3",G,m(o.item.name),1),e("div",J,"$"+m(Number(o.item.price).toFixed(2)),1)]),e("p",K,m(o.item.desc),1),e("div",W,[o.item.badge?(n(),r("div",X,[e("span",Z,m(o.item.badge),1)])):k("",!0),e("button",{class:"add",onClick:l[0]||(l[0]=s=>d.value=!0)},"ADD")]),d.value?(n(),r("div",ee,[e("div",te,[e("h2",se,m(o.item.name),1),o.item.sizes&&o.item.sizes.length>0?(n(),r("section",ae,[l[6]||(l[6]=e("h3",null,"Choose Size",-1)),(n(!0),r($,null,C(o.item.sizes,s=>(n(),r("label",{key:s.sizeID,class:"option"},[x(e("input",{type:"radio",name:"variant",value:s,"onUpdate:modelValue":l[1]||(l[1]=c=>v.value=c)},null,8,le),[[D,v.value]]),M(" "+m(s.sizeName)+" ($"+m(Number(s.price).toFixed(2))+") ",1)]))),128))])):k("",!0),o.item.addons&&o.item.addons.length>0?(n(),r("section",ie,[l[7]||(l[7]=e("h3",null,"Add-ons",-1)),(n(!0),r($,null,C(o.item.addons,s=>(n(),r("label",{key:s.addonID,class:"option"},[x(e("input",{type:"checkbox",value:s,"onUpdate:modelValue":l[2]||(l[2]=c=>u.value=c)},null,8,oe),[[E,u.value]]),M(" "+m(s.addonName)+" (+$"+m(Number(s.price).toFixed(2))+") ",1)]))),128))])):k("",!0),e("section",ne,[l[8]||(l[8]=e("h3",null,"Quantity",-1)),e("div",re,[e("button",{onClick:l[3]||(l[3]=s=>f.value>1&&f.value--)},"-"),e("span",null,m(f.value),1),e("button",{onClick:l[4]||(l[4]=s=>f.value++)},"+")])]),e("div",ce,[e("button",{class:"cancel",onClick:l[5]||(l[5]=s=>d.value=!1)},"Cancel"),e("button",{class:"confirm",onClick:y},"Add to Cart")])])])):k("",!0)]))}},ue=F(de,[["__scopeId","data-v-49ebfdd4"]]),me={class:"sheet"},ve={class:"section"},pe={class:"grid2"},ge=["checked","onChange"],he={class:"section"},fe={class:"rangebox"},be={class:"range-label"},ke={__name:"FilterSheet",props:{open:Boolean,categories:{type:Array,default:()=>[]},prices:{type:Array,default:()=>[]}},emits:["close","apply-filters"],setup(o,{emit:p}){const h=g(20),d=g([]),f=o,v=p,u=l=>{const s=d.value.indexOf(l);s>-1?d.value.splice(s,1):d.value=[l]},y=()=>{const l={categories:d.value.map(s=>{const c=f.categories.find(_=>_.id===s);return{id:c.id,label:c.label}}),price:h.value};v("apply-filters",l)},b=()=>{d.value=[],h.value=20,v("apply-filters",{categories:[],price:null})};return(l,s)=>o.open?(n(),r("div",{key:0,class:"overlay",onClick:s[1]||(s[1]=P(c=>l.$emit("close"),["self"]))},[e("div",me,[s[4]||(s[4]=e("h2",{class:"title"},"Filter Menu",-1)),e("section",ve,[s[2]||(s[2]=e("h3",null,"Category",-1)),e("div",pe,[(n(!0),r($,null,C(o.categories,c=>(n(),r("label",{key:c.id,class:"opt"},[e("input",{type:"checkbox",checked:d.value.includes(c.id),onChange:_=>u(c.id)},null,40,ge),e("span",null,m(c.label),1)]))),128))])]),e("section",he,[s[3]||(s[3]=e("h3",null,"Price Range",-1)),e("div",fe,[x(e("input",{type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":s[0]||(s[0]=c=>h.value=c)},null,512),[[O,h.value]]),e("div",be," Selected: $0 – $"+m(h.value),1)])]),e("div",{class:"actions"},[e("button",{class:"ghost",onClick:b},"RESET"),e("button",{class:"primary",onClick:y},"APPLY FILTERS")])])])):k("",!0)}},$e=F(ke,[["__scopeId","data-v-f5e76bb5"]]),ye={class:"wrap"},Ce={class:"topbar"},_e={key:0,class:"badge"},we={class:"cats",role:"tablist","aria-label":"Categories"},xe=["aria-selected","onClick"],Fe={class:"pill-emoji"},Me=["src","alt"],Ae={key:1},Ie={class:"pill-label"},Ne={class:"filters-row"},Se={class:"list"},je={__name:"Menu",setup(o){const p=N(),h=q(),d=g(!1),f=[{id:"p1",label:"$0 – $10"},{id:"p2",label:"$10 – $20"},{id:"p3",label:"$20 – $30"},{id:"p4",label:"$30 – $40"},{id:"p5",label:"$40 – $60"},{id:"p6",label:"$60+"}],v=g([{id:"all",name:"All",emoji:"🍲"}]),u=g("all"),y=async()=>{try{const a=await h.fetchPackages();if(a.success&&a.data&&a.data.length>0){const t=a.data.map(i=>({id:i.packageID.toString(),name:i.packageName,image:i.photo80?`https://menu.deegaan.so/assets/images/meals/packages/small80/${i.photo80}`:"/images/dishes/default.jpg"}));v.value=[{id:"all",name:"All",emoji:"🍲",image:null},...t]}}catch(a){console.error("Error fetching categories:",a)}};T(async()=>{await y(),await c(),w()});const b=g([]),l=g([]),s=g(null),c=async()=>{try{const a=await h.fetchItems();a.success&&a.data&&(l.value=a.data.map(t=>({id:t.itemID.toString(),name:t.itemName,price:parseFloat(t.costPrice),desc:t.description||"",cat:t.packageID.toString(),image:t.photo320?`https://menu.deegaan.so/assets/images/meals/items/middle320/${t.photo320}`:"/images/dishes/default.jpg",badge:t.isVegetarian?"Vegetarian":t.isSpicy?"Spicy":"",sizes:t.active_sizes||[],addons:t.active_addons||[]})))}catch(a){console.error("Error fetching menu items:",a)}},_=a=>{u.value=a,w()},w=()=>{let a=[...l.value];u.value!=="all"&&(a=a.filter(t=>t.cat===u.value)),s.value!==null&&(a=a.filter(t=>t.price<=s.value)),b.value=a},S=A(()=>b.value),j=A(()=>v.value.filter(a=>a.id!=="all").map(a=>({id:a.id,label:a.name}))),V=a=>{if(s.value=a.price||null,a.categories&&a.categories.length>0){const t=a.categories[0];u.value=t.id}else u.value="all";w(),d.value=!1};function z(a){}return(a,t)=>(n(),r($,null,[e("div",ye,[e("header",Ce,[e("button",{class:"iconbtn",onClick:t[0]||(t[0]=i=>a.$router.back()),"aria-label":"Back"},[...t[4]||(t[4]=[e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),t[6]||(t[6]=e("h1",{class:"title"},"MENU",-1)),e("button",{class:"iconbtn cartbtn","aria-label":"Cart",onClick:t[1]||(t[1]=i=>a.$router.push({name:"checkout"}))},[t[5]||(t[5]=e("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"9",cy:"20",r:"1"}),e("circle",{cx:"17",cy:"20",r:"1"}),e("path",{d:"M3 3h2l2.2 11.4a2 2 0 0 0 2 1.6h7.5a2 2 0 0 0 2-1.6L21 7H6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),I(p).count?(n(),r("span",_e,m(I(p).count),1)):k("",!0)])]),e("nav",we,[(n(!0),r($,null,C(v.value,i=>(n(),r("button",{key:i.id,class:R(["pill",{active:i.id===u.value}]),role:"tab","aria-selected":i.id===u.value,onClick:Ve=>_(i.id)},[e("span",Fe,[i.image?(n(),r("img",{key:0,src:i.image,alt:i.name,class:"pill-image"},null,8,Me)):(n(),r("span",Ae,m(i.emoji),1))]),e("span",Ie,m(i.name),1)],10,xe))),128))]),e("div",Ne,[e("button",{class:"filterbtn",onClick:t[2]||(t[2]=i=>d.value=!0)},[...t[7]||(t[7]=[e("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 6h16M7 12h10M10 18h4","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"Filters",-1)])])]),e("main",Se,[(n(!0),r($,null,C(S.value,i=>(n(),U(ue,{key:i.id,item:i,onAdd:z},null,8,["item"]))),128))])]),L($e,{open:d.value,categories:j.value,prices:f,onClose:t[3]||(t[3]=i=>d.value=!1),onApplyFilters:V},null,8,["open","categories"])],64))}},De=F(je,[["__scopeId","data-v-dc175cdf"]]);export{De as default};
